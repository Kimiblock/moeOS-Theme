#! /bin/bash
function update(){
	paru
	currentDir=$(pwd)
	mkdir "${updateDir}"
	cd "${updateDir}"
	git clone https://github.com/Kimiblock/moeOS-Package.git
	cd moeOS-Package
	paru -Ui
	cd "${currentDir}"
}

function clean(){
	rm -rf "${updateDir}"
}

function main(){
	if [[ $(whoami) = root ]]; then
		echo "Update using root is prohibited"
		exit 1
	fi
	updateDir=/tmp/moeOS-Update-$(uuidgen)
	update
	clean
}

main