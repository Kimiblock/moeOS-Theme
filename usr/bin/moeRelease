#!/bin/bash

function main(){
	replace "/usr/share/moeOS-Docs/os-release" "/etc/os-release"
	replace "/usr/share/moeOS-Docs/os-release" "/usr/lib/os-release"
	replace  "/usr/share/moeOS-Docs/ibus-rime.conf.d/default.yaml" "/usr/share/rime-data/default.yaml"
	replace /etc/tlp.d/1-moeOS.conf /etc/tlp.conf
	replace /usr/share/moeOS-Docs/librewolf.d/librewolf.cfg /usr/lib/librewolf/librewolf.cfg
	for unit in power-profiles-daemon bluetooth NetworkManager systemd-oomd; do
		systemctl enable ${unit}
	done
	plymouth-set-default-theme moe-next
}

function _info() {
	if [ -f /usr/bin/pamac ]; then
		echo "  ==> [Info]: $@"
	else
		all_off="$(tput sgr0)"
		bold="${all_off}$(tput bold)"
		blue="${bold}$(tput setaf 4)"
		yellow="${bold}$(tput setaf 3)"
		printf "${blue}==>${yellow} [Info]:${bold} $1${all_off}\n"
	fi
}

function replace(){
	if [[ $(diff $1 $2) ]]; then
		cp $1 $2
	fi
}

main "$@"
