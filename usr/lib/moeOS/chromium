#!/bin/bash
bwrap \
	--symlink usr/lib /lib \
	--symlink usr/lib64 /lib64 \
	--symlink usr/bin /bin \
	--symlink usr/bin /sbin \
	--ro-bind /usr/lib /usr/lib \
	--ro-bind /usr/lib64 /usr/lib64 \
	--ro-bind /usr/bin /usr/bin \
	--ro-bind /etc /etc \
	--ro-bind /usr/lib/chromium /usr/lib/chromium \
	--ro-bind /usr/share /usr/share \
	--dev /dev \
	--dev-bind /dev/dri /dev/dri \
	--proc /proc \
	--ro-bind /sys/dev/char /sys/dev/char \
	--ro-bind /sys/devices /sys/devices \
	--ro-bind /run/dbus /run/dbus \
	--bind "$XDG_RUNTIME_DIR" "$XDG_RUNTIME_DIR" \
	--chmod 0700 "$XDG_RUNTIME_DIR" \
	--tmpfs /tmp \
	--bind "$HOME" "$HOME" \
	env GTK_IM_MODULE=ibus \
		/usr/bin/chromium \
			--gtk-version=4 \
			--ozone-platform-hint=auto \
			--enable-features=VaapiVideoDecodeLinuxGL,VaapiVideoDecoder \
			"$@"
